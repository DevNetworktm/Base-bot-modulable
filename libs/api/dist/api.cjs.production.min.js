"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("express"),r=(t=e)&&"object"==typeof t&&"default"in t?t.default:t;function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var s=function(){function t(t,e,r){this._options=t,this._moduleName=e,this._route=r}return t.prototype.main=function(){return this._router=r.Router(),this._router.use(this._route.baseUrl,this._route.main(this._options)),this._router.get("/try",(function(t,e){e.send("success")})),this._router},n(t,[{key:"options",get:function(){return this._options}},{key:"moduleName",get:function(){return this._moduleName}},{key:"route",get:function(){return this._route}}]),t}(),u=function(t,e,r){r.status(t).json({error:!0,message:e})},i=function(t,e,r){var o=!1;return r.map((function(r){if(!t.body[r])return o=!0,u(404,"Missing "+r+" in body",e)})),o},p=function(){function t(t){this._baseUrl=t,this._request=[],this._routes=[],this._options={}}var r=t.prototype;return r.main=function(t){var r=this;return this._options=t,this._router=e.Router(),this._request.map((function(t){r._router[t.type](t.path,(function(e,o){t.options.bodyController&&t.options.bodyController[0]&&i(e,o,t.options.bodyController)||t.options.headerController&&t.options.headerController[0]&&function(t,e,r){var o=!1;return r.map((function(r){if(!t.headers[r])return o=!0,u(404,"Missing "+r+" in header",e)})),o}(e,o,t.options.headerController)||t.execute(r._options,e,o)}))})),this._routes[0]&&this._routes.map((function(t){r._router.use(t.baseUrl,t.main(r._options))})),this._router},r.use=function(t){this._routes.push(t)},r.get=function(t,e,r){return this._request.push({type:"get",path:t,options:e,execute:r}),this},r.post=function(t,e,r){return this._request.push({type:"post",path:t,options:e,execute:r}),this},r.put=function(t,e,r){return this._request.push({type:"put",path:t,options:e,execute:r}),this},r.delete=function(t,e,r){return this._request.push({type:"delete",path:t,options:e,execute:r}),this},n(t,[{key:"baseUrl",get:function(){return this._baseUrl}},{key:"request",get:function(){return this._request}}]),t}();exports.Error=u,exports.Route=p,exports.Router=s,exports.bodyController=i;
//# sourceMappingURL=api.cjs.production.min.js.map
